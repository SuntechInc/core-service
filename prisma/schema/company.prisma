model Company {
    id          String  @id @default(cuid()) @map("id_company")
    tradingName String  @unique @map("trading_name")
    legalName   String  @map("legal_name")
    taxId       String  @unique @map("id_tax")
    email       String  @unique @map("company_email")
    phone       String? @map("company_phone")

    industry Industry
    segment  Segment

    isActive  Boolean  @default(true) @map("is_active")
    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    branches Branch[]

    @@unique([legalName, taxId])
    @@map("companies")
}

enum Industry {
    HEALTHCORE
    AGRIBUSINESS
    TRANSPORTATION_MOBILITY
    TECHNOLOGY
}

enum Segment {
    LABORATORY
    HOSPITAL
    MEDICAL_METALLURGY
    ANIMAL_HEALTH
    VEHICLE_INSPECTION
    VEHICLE_REGISTRATION
    DRIVING_SCHOOL
}

model Branch {
    id   String @id @default(cuid()) @map("id_branch")
    name String @map("branch_name")

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    company   Company @relation(fields: [companyId], references: [id])
    companyId String  @map("id_company")

    departments Department[]
    Employee    Employee[]

    @@unique([name, companyId])
    @@map("branches")
    JobTitle JobTitle[]
}

model Department {
    id       String  @id @default(cuid()) @map("id_department")
    name     String  @map("department_name")
    Branch   Branch? @relation(fields: [branchId], references: [id])
    branchId String? @map("id_branch")

    createdAt DateTime   @default(now()) @map("created_at")
    updatedAt DateTime   @updatedAt @map("updated_at")
    Employee  Employee[]

    @@unique([name, branchId])
    @@map("departments")
}
